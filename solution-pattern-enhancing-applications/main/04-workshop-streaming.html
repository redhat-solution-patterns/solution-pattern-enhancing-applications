<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Solution Patterns for Cloud Native Architectures</title>
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H3CL05C7LX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-H3CL05C7LX');
</script>  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://redhat.com" target="_blank"><img
          src="../../_/img/logo.png" height="40px" alt="Cloud Native Architecture Solution Patterns"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../..">Solution Patterns for Cloud Native Architectures</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

       
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Solution Patterns</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Adopt Change Data Capture for <br/>stack modernization</a>
            <a class="navbar-item" href="#">Edge-to-Cloud Pipelines</a>     <a class="navbar-item" href="#">Event driven architecture</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Other</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-gitops-patterns.io/">GitOps Solution Patterns</a>
            <a class="navbar-item" href="https://hybrid-cloud-patterns.io/">Hybrid Cloud Solution Patterns</a>
          </div>
        </div>

        <a class="navbar-item" target="_blank" href="https://www.redhat.com/en/products/middleware">Red Hat Application Services</a>

        <a class="navbar-item" target="_blank" href="https://developers.redhat.com/middleware">Learn more</a>

      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="solution-pattern-enhancing-applications" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">Enhancing Applications with Application Services</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">1. Home page</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#use-cases">1. Use cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#background">2. The story behind this solution pattern</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#solution">3. The solution</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#_explore_more_solution_patterns">4. Explore more solution patterns</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-architecture.html">2. Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-architecture.html#challenges">1. Common challenges</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-architecture.html#tech_stack">2. Technology stack</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-architecture.html#in_depth">3. An in-depth look at the solution&#8217;s architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-architecture.html#more_tech">4. More about the technology stack</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-demo.html">3. See the Solution in Action</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-demo.html#recorded_demo">1. Recorded demo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-demo.html#demo_walkthrough">2. Walkthrough guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-demo.html#demo_prerequisites">2.1. Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-demo.html#demo_step_by_step">2.2. Step by step guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="03-demo.html#_api_first_approach">API First approach</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="03-demo.html#_apache_kafka_service">Apache Kafka Service</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="03-demo.html#_inner_development_loop">Inner Development Loop</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="03-demo.html#_managed_api_management_cloud_service">Managed API Management Cloud Service</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-workshop.html">4. Workshop</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-workshop.html#workshop_prerequisites">1. Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-workshop.html#workshop_provisioning">2. Provisioning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-workshop.html#workshop_intro">3. Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-workshop.html#workshop_add_streaming">4. Adding Event Streaming capabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-workshop.html#workshop_api_mgmt">5. Adding API Management capabilities</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="05-devresources.html">5. Developer Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://redhat-solution-patterns.github.io/">Other Red Hat Solution Patterns</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Enhancing Applications with Application Services</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Enhancing Applications with Application Services</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-solution-patterns/solution-pattern-enhancing-applications/edit/main/documentation/modules/ROOT/pages/04-workshop-streaming.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="workshop_add_streaming"><a class="anchor" href="#workshop_add_streaming"></a>Adding Event Streaming capabilities to the application</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h3>
<div class="paragraph">
<p>To support the business requirement of capturing and processing user activity on the Globex Coolstuff application, two new services have been developed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Activity Tracking service</strong>: This service exposes a REST endpoint. User activities on the Coolstuff website (such as opening a product page, liking a product etc..) generates an activity payload which is sent to the Activity tracking REST endpoint. The service transforms this payload into a Kafka message which is sent to a topic on the Kafka broker.</p>
</li>
<li>
<p><strong>Recommendation Engine</strong>: This service consumes and processes the events produced by the Activity Tracking service. The service uses the Kafka Streams library to continuously determine the top featured products (the products which generate the most activities).
The service also exposes a REST endpoint to expose the list of featured products.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both services are developed using Quarkus and the Quarkus extensions for reactive messaging and Kafka Streams. The development of the services is outside the scope of this workshop, but you are encouraged to examine the source code of the applications on GitHub: <a href="https://https://github.com/app-modernization-workshop-globex/activity-tracking-service">Activity Tracking Service</a> and <a href="https://github.com/app-modernization-workshop-globex/recommendation-engine">Recommendation Engine</a></p>
</div>
<div class="paragraph">
<p>For the Kafka platform, the workshop uses Red Hat AMQ Streams for Apache Kafka. AMQ Streams includes an Operator to make it easy to run a Kafka service on Red Hat OpenShift. The service can be very easily consumed and used by developers.</p>
</div>
</div>
<div class="sect2">
<h3 id="_activities"><a class="anchor" href="#_activities"></a>Activities</h3>
<div class="paragraph">
<p>In this part of the workshop you will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provision and configure an AMQ Streams instance for Apache Kafka.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_environment_and_prerequisites"><a class="anchor" href="#_environment_and_prerequisites"></a>Environment and prerequisites</h3>
<div class="paragraph">
<p>The Globex Coolstuff application is deployed on an OpenShift cluster in a separate namespace. All activities in this part of the workshop can be done in the OpenShift console and do not require any tools to be installed on your workstation.</p>
</div>
<div class="paragraph">
<p>Prerequisites:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A Red Hat Account</p>
</li>
<li>
<p>Optional: <code>oc</code> CLI installed on your workstation.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_step_by_step_instructions"><a class="anchor" href="#_step_by_step_instructions"></a>Step-By-Step Instructions</h3>
<div class="sect3">
<h4 id="_explore_the_environment"><a class="anchor" href="#_explore_the_environment"></a>Explore the environment</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a browser window, navigate to the console of your OpenShift cluster. Open the <strong>Developer</strong> perspective in the <strong>globex</strong> namespace.</p>
</li>
<li>
<p>In the Developer perspective, open the <strong>Topology</strong> view. Expect to see something like this (rearrange the topology as you see fit):</p>
<div class="imageblock">
<div class="content">
<img src="_images/04/globex-deployment-topology.png" alt="globex deployment topology">
</div>
</div>
<div class="paragraph">
<p>The deployed topology consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>globex-ui</code>: The Globex Coolstuff web application (Node.js/Angular).</p>
</li>
<li>
<p><code>catalog-app</code>: The Globex Coolstuff catalog service, consisting of the catalog database and the Spring Boot catalog microservice.</p>
</li>
<li>
<p><code>inventory-app</code>: The Globex Coolstuff inventory service, consisting of the inventory database and the Quarkus inventory microservice.</p>
</li>
<li>
<p><code>activity-tracking</code>: The Activity Tracking service. Notice that the deployment of the service is scaled to zero. The service will be scaled up once the connection to the Kafka broker is set up.</p>
</li>
<li>
<p><code>recommendation-engine</code>: The Recommendation Engine service. Notice that the deployment of the service is scaled to zero. The service will be scaled up once the connection to the Kafka broker is set up.</p>
</li>
<li>
<p><code>activity-tracking-simulator</code>: A Quarkus service that simulates user activity events and sends them to the Activity Tracking service.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Find the route to the <strong>Globex UI</strong> application and open the URL in your browser.. Expect to see the home page of the Globex Coolstuff web application:</p>
<div class="imageblock">
<div class="content">
<img src="_images/04/globex-coolstuff-home-page.png" alt="globex coolstuff home page">
</div>
</div>
<div class="paragraph">
<p>Click on <strong>Cool Stuff Store</strong> in the top menu to see a paginated list of products:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/04/globex-coolstuff-product-page.png" alt="globex coolstuff product page">
</div>
</div>
<div class="paragraph">
<p>Note the <em>Featured</em> pane on the home page, which is empty at the moment. Also the product list page has an empty bar above the product list. These elements will be populated once the recommendation engine is up and running.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_provision_and_configure_an_amq_streams_for_apache_kafka_instance"><a class="anchor" href="#_provision_and_configure_an_amq_streams_for_apache_kafka_instance"></a>Provision and configure an AMQ Streams for Apache Kafka instance</h4>
<div class="paragraph">
<p>TBD</p>
</div>
<div class="paragraph">
<p><strong>Create a Kafka Topic in AMQ Streams for Apache Kafka</strong></p>
</div>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <img
          src="../../_/img/app-services-logo.png" height="40px" alt="Cloud Native Architecture Solution Patterns"  href="https://redhat.com" ></a>
</footer><script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
